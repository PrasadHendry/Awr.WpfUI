<Application x:Class="Awr.WpfUI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Awr.WpfUI.ViewModels"
             xmlns:v="clr-namespace:Awr.WpfUI.Views"
             ShutdownMode="OnExplicitShutdown" 
             Startup="Application_Startup">
    <Application.Resources>

        <BooleanToVisibilityConverter x:Key="BoolToVis" />

        <!-- OPTIMIZED GLOBAL DATAGRID STYLE -->
        <Style TargetType="DataGrid">
            <!-- 1. Enable Virtualization (Critical for speed) -->
            <Setter Property="EnableRowVirtualization" Value="True"/>
            <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>

            <!-- 2. Reuse row containers (Saves memory) -->
            <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>

            <!-- 3. Deferred Scrolling (Smoother scrolling on old CPUs) -->
            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="True"/>

            <!-- 4. Render Speed Optimizations -->
            <Setter Property="RenderOptions.ClearTypeHint" Value="Enabled"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>

            <!-- 5. Default Visuals (Applies to all grids) -->
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="VerticalGridLinesBrush" Value="#DDD"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#DDD"/>
            <Setter Property="BorderBrush" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="RowHeight" Value="35"/>
        </Style>

        <!-- VIEW MAPPINGS -->
        <DataTemplate DataType="{x:Type vm:RequestSubmissionViewModel}">
            <v:NewRequestView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:IssuanceQueueViewModel}">
            <v:IssuanceQueueView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:ReceiptReturnViewModel}">
            <v:ReceiptReturnView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:AuditTrailViewModel}">
            <v:AuditTrailView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:PlaceholderViewModel}">
            <Grid Background="#EEE">
                <TextBlock Text="Coming Soon..." VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="#999" FontSize="20"/>
            </Grid>
        </DataTemplate>

    </Application.Resources>
</Application>